import{h as x,u as ie,L as $e,j as W,M as be,N as Le,E as ae,G as _,A as J,g as z,O as Pe,B as ee,C as j,D as Q,F as De,H as le,P as Ve,I as N,s as Oe,n as Be}from"./app-BoZk32P-.js";import{t as ke,d as _e,c as P,f as ge,e as Ne,u as je}from"./CheckIcon-D58sfvjG.js";import{g as ye,u as k,o as C,w as We,t as Ie,i as V,f as He,E as Ue,b as Ke,A as Z,T as se,c as re,N as te,l as Ee,O as qe,d as B,n as Je,S as q,s as Ye,k as Ge}from"./keyboard-CQk8tYLo.js";function G(e,i,t){let o=t.initialDeps??[],l;return()=>{var a,s,n,d;let v;t.key&&((a=t.debug)!=null&&a.call(t))&&(v=Date.now());const f=e();if(!(f.length!==o.length||f.some((M,R)=>o[R]!==M)))return l;o=f;let S;if(t.key&&((s=t.debug)!=null&&s.call(t))&&(S=Date.now()),l=i(...f),t.key&&((n=t.debug)!=null&&n.call(t))){const M=Math.round((Date.now()-v)*100)/100,R=Math.round((Date.now()-S)*100)/100,$=R/16,F=(A,h)=>{for(A=String(A);A.length<h;)A=" "+A;return A};console.info(`%c⏱ ${F(R,5)} /${F(M,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*$,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(d=t==null?void 0:t.onChange)==null||d.call(t,l),l}}function de(e,i){if(e===void 0)throw new Error("Unexpected undefined");return e}const Qe=(e,i)=>Math.abs(e-i)<1,Xe=(e,i,t)=>{let o;return function(...l){e.clearTimeout(o),o=e.setTimeout(()=>i.apply(this,l),t)}},Ze=e=>e,et=e=>{const i=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let l=i;l<=t;l++)o.push(l);return o},tt=(e,i)=>{const t=e.scrollElement;if(!t)return;const o=e.targetWindow;if(!o)return;const l=s=>{const{width:n,height:d}=s;i({width:Math.round(n),height:Math.round(d)})};if(l(t.getBoundingClientRect()),!o.ResizeObserver)return()=>{};const a=new o.ResizeObserver(s=>{const n=s[0];if(n!=null&&n.borderBoxSize){const d=n.borderBoxSize[0];if(d){l({width:d.inlineSize,height:d.blockSize});return}}l(t.getBoundingClientRect())});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},xe={passive:!0},lt=typeof window>"u"?!0:"onscrollend"in window,nt=(e,i)=>{const t=e.scrollElement;if(!t)return;const o=e.targetWindow;if(!o)return;let l=0;const a=e.options.useScrollendEvent&&lt?()=>{}:Xe(o,()=>{i(l,!1)},e.options.isScrollingResetDelay),s=v=>()=>{const{horizontal:f,isRtl:g}=e.options;l=f?t.scrollLeft*(g&&-1||1):t.scrollTop,a(),i(l,v)},n=s(!0),d=s(!1);return d(),t.addEventListener("scroll",n,xe),t.addEventListener("scrollend",d,xe),()=>{t.removeEventListener("scroll",n),t.removeEventListener("scrollend",d)}},ot=(e,i,t)=>{if(i!=null&&i.borderBoxSize){const o=i.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},it=(e,{adjustments:i=0,behavior:t},o)=>{var l,a;const s=e+i;(a=(l=o.scrollElement)==null?void 0:l.scrollTo)==null||a.call(l,{[o.options.horizontal?"left":"top"]:s,behavior:t})};class at{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(l=>{l.forEach(a=>{this._measureElement(a.target,a)})}));return{disconnect:()=>{var l;(l=o())==null||l.disconnect(),t=null},observe:l=>{var a;return(a=o())==null?void 0:a.observe(l,{box:"border-box"})},unobserve:l=>{var a;return(a=o())==null?void 0:a.unobserve(l)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,l])=>{typeof l>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ze,rangeExtractor:et,onChange:()=>{},measureElement:ot,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var o,l;(l=(o=this.options).onChange)==null||l.call(o,this,t)},this.maybeNotify=G(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,o)=>{const l=new Map,a=new Map;for(let s=o-1;s>=0;s--){const n=t[s];if(l.has(n.lane))continue;const d=a.get(n.lane);if(d==null||n.end>d.end?a.set(n.lane,n):n.end<d.end&&l.set(n.lane,!0),l.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,n)=>s.end===n.end?s.index-n.index:s.end-n.end)[0]:void 0},this.getMeasurementOptions=G(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,o,l,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:l,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=G(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:l,getItemKey:a,enabled:s},n)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const v=this.measurementsCache.slice(0,d);for(let f=d;f<t;f++){const g=a(f),S=this.options.lanes===1?v[f-1]:this.getFurthestMeasurement(v,f),M=S?S.end+this.options.gap:o+l,R=n.get(g),$=typeof R=="number"?R:this.options.estimateSize(f),F=M+$,A=S?S.lane:f%this.options.lanes;v[f]={index:f,start:M,size:$,end:F,key:g,lane:A}}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=G(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,o,l)=>this.range=t.length>0&&o>0?st({measurements:t,outerSize:o,scrollOffset:l}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=G(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,l,a)=>o===null?[]:t({startIndex:o.startIndex,endIndex:o.endIndex,overscan:l,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,l=t.getAttribute(o);return l?parseInt(l,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const l=this.indexFromElement(t),a=this.measurementsCache[l];if(!a)return;const s=a.key,n=this.elementsCache.get(s);n!==t&&(n&&this.observer.unobserve(n),this.observer.observe(t),this.elementsCache.set(s,t)),t.isConnected&&this.resizeItem(l,this.options.measureElement(t,o,this))},this.resizeItem=(t,o)=>{const l=this.measurementsCache[t];if(!l)return;const a=this.itemSizeCache.get(l.key)??l.size,s=o-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,s,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,o)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((o,l)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(l))});return}this._measureElement(t,void 0)},this.getVirtualItems=G(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const l=[];for(let a=0,s=t.length;a<s;a++){const n=t[a],d=o[n];l.push(d)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();if(o.length!==0)return de(o[we(0,o.length-1,l=>de(o[l]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const l=this.getSize(),a=this.getScrollOffset();o==="auto"&&(t<=a?o="start":t>=a+l?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-l:o==="center"&&(t=t-l/2);const s=this.options.horizontal?"scrollWidth":"scrollHeight",d=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-l;return Math.max(Math.min(d,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const l=this.measurementsCache[t];if(!l)return;const a=this.getSize(),s=this.getScrollOffset();if(o==="auto")if(l.end>=s+a-this.options.scrollPaddingEnd)o="end";else if(l.start<=s+this.options.scrollPaddingStart)o="start";else return[s,o];const n=o==="end"?l.end+this.options.scrollPaddingEnd:l.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(n,o),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:l}={})=>{this.cancelScrollToIndex(),l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:l})},this.scrollToIndex=(t,{align:o="auto",behavior:l}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(t,o);if(!a)return;const[s,n]=a;this._scrollToOffset(s,{adjustments:void 0,behavior:l}),l!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[v]=de(this.getOffsetForIndex(t,n));Qe(v,this.getScrollOffset())||this.scrollToIndex(t,{align:n,behavior:l})}else this.scrollToIndex(t,{align:n,behavior:l})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let l;return o.length===0?l=this.options.paddingStart:l=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(a=>a.end)),Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:o,behavior:l})=>{this.options.scrollToFn(t,{behavior:l,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const we=(e,i,t,o)=>{for(;e<=i;){const l=(e+i)/2|0,a=t(l);if(a<o)e=l+1;else if(a>o)i=l-1;else return l}return e>0?e-1:0};function st({measurements:e,outerSize:i,scrollOffset:t}){const o=e.length-1,a=we(0,o,n=>e[n].start,t);let s=a;for(;s<o&&e[s].end<t+i;)s++;return{startIndex:a,endIndex:s}}function rt(e){const i=new at(ie(e)),t=$e(i),o=i._didMount();return W(()=>ie(e).getScrollElement(),l=>{l&&i._willUpdate()},{immediate:!0}),W(()=>ie(e),l=>{i.setOptions({...l,onChange:(a,s)=>{var n;be(t),(n=l.onChange)==null||n.call(l,a,s)}}),i._willUpdate(),be(t)},{immediate:!0}),Le(o),t}function ut(e){return rt(x(()=>({observeElementRect:tt,observeElementOffset:nt,scrollToFn:it,...ie(e)})))}function X(){let e=[],i={addEventListener(t,o,l,a){return t.addEventListener(o,l,a),i.add(()=>t.removeEventListener(o,l,a))},requestAnimationFrame(...t){let o=requestAnimationFrame(...t);i.add(()=>cancelAnimationFrame(o))},nextFrame(...t){i.requestAnimationFrame(()=>{i.requestAnimationFrame(...t)})},setTimeout(...t){let o=setTimeout(...t);i.add(()=>clearTimeout(o))},microTask(...t){let o={current:!0};return ke(()=>{o.current&&t[0]()}),i.add(()=>{o.current=!1})},style(t,o,l){let a=t.style.getPropertyValue(o);return Object.assign(t.style,{[o]:l}),this.add(()=>{Object.assign(t.style,{[o]:a})})},group(t){let o=X();return t(o),this.add(()=>o.dispose())},add(t){return e.push(t),()=>{let o=e.indexOf(t);if(o>=0)for(let l of e.splice(o,1))l()}},dispose(){for(let t of e.splice(0))t()}};return i}function dt(){let e=X();return ae(()=>e.dispose()),e}function ct(){let e=dt();return i=>{e.dispose(),e.nextFrame(i)}}function vt({container:e,accept:i,walk:t,enabled:o}){_(()=>{let l=e.value;if(!l||o!==void 0&&!o.value)return;let a=ye(e);if(!a)return;let s=Object.assign(d=>i(d),{acceptNode:i}),n=a.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,s,!1);for(;n.nextNode();)t(n.currentNode)})}var Te=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(Te||{});function ft(e){function i(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",i))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",i),i())}let K=[];ft(()=>{function e(i){i.target instanceof HTMLElement&&i.target!==document.body&&K[0]!==i.target&&(K.unshift(i.target),K=K.filter(t=>t!=null&&t.isConnected),K.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var pt={};function ht(e,i){return e===i}var mt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(mt||{}),bt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(bt||{}),gt=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(gt||{});let Ce=Symbol("ComboboxContext");function ne(e){let i=le(Ce,null);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ne),t}return i}let Re=Symbol("VirtualContext"),xt=J({name:"VirtualProvider",setup(e,{slots:i}){let t=ne("VirtualProvider"),o=x(()=>{let n=C(t.optionsRef);if(!n)return{start:0,end:0};let d=window.getComputedStyle(n);return{start:parseFloat(d.paddingBlockStart||d.paddingTop),end:parseFloat(d.paddingBlockEnd||d.paddingBottom)}}),l=ut(x(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return C(t.optionsRef)},overscan:12}))),a=x(()=>{var n;return(n=t.virtual.value)==null?void 0:n.options}),s=z(0);return W([a],()=>{s.value+=1}),ee(Re,t.virtual.value?l:null),()=>[Q("div",{style:{position:"relative",width:"100%",height:`${l.value.getTotalSize()}px`},ref:n=>{if(n){if(typeof process<"u"&&pt.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&l.value.scrollToIndex(t.activeOptionIndex.value)}}},l.value.getVirtualItems().map(n=>Ve(i.default({option:t.virtual.value.options[n.index],open:t.comboboxState.value===0})[0],{key:`${s.value}-${n.index}`,"data-index":n.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":n.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${n.start}px)`,overflowAnchor:"none"}})))]}}),Lt=J({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:i,attrs:t,emit:o}){let l=z(1),a=z(null),s=z(null),n=z(null),d=z(null),v=z({static:!1,hold:!1}),f=z([]),g=z(null),S=z(2),M=z(!1);function R(r=c=>c){let c=g.value!==null?f.value[g.value]:null,b=r(f.value.slice()),m=b.length>0&&b[0].dataRef.order.value!==null?b.sort((O,L)=>O.dataRef.order.value-L.dataRef.order.value):qe(b,O=>C(O.dataRef.domRef)),w=c?m.indexOf(c):null;return w===-1&&(w=null),{options:m,activeOptionIndex:w}}let $=x(()=>e.multiple?1:0),F=x(()=>e.nullable),[A,h]=_e(x(()=>e.modelValue),r=>o("update:modelValue",r),x(()=>e.defaultValue)),y=x(()=>A.value===void 0?k($.value,{1:[],0:void 0}):A.value),D=null,p=null;function I(r){return k($.value,{0(){return h==null?void 0:h(r)},1:()=>{let c=N(u.value.value).slice(),b=N(r),m=c.findIndex(w=>u.compare(b,N(w)));return m===-1?c.push(b):c.splice(m,1),h==null?void 0:h(c)}})}let T=x(()=>{});W([T],([r],[c])=>{if(u.virtual.value&&r&&c&&g.value!==null){let b=r.indexOf(c[g.value]);b!==-1?g.value=b:g.value=null}});let u={comboboxState:l,value:y,mode:$,compare(r,c){if(typeof e.by=="string"){let b=e.by;return(r==null?void 0:r[b])===(c==null?void 0:c[b])}return e.by===null?ht(r,c):e.by(r,c)},calculateIndex(r){return u.virtual.value?e.by===null?u.virtual.value.options.indexOf(r):u.virtual.value.options.findIndex(c=>u.compare(c,r)):f.value.findIndex(c=>u.compare(c.dataRef.value,r))},defaultValue:x(()=>e.defaultValue),nullable:F,immediate:x(()=>!1),virtual:x(()=>null),inputRef:s,labelRef:a,buttonRef:n,optionsRef:d,disabled:x(()=>e.disabled),options:f,change(r){h(r)},activeOptionIndex:x(()=>{if(M.value&&g.value===null&&(u.virtual.value?u.virtual.value.options.length>0:f.value.length>0)){if(u.virtual.value){let c=u.virtual.value.options.findIndex(b=>{var m;return!((m=u.virtual.value)!=null&&m.disabled(b))});if(c!==-1)return c}let r=f.value.findIndex(c=>!c.dataRef.disabled);if(r!==-1)return r}return g.value}),activationTrigger:S,optionsPropsRef:v,closeCombobox(){M.value=!1,!e.disabled&&l.value!==1&&(l.value=1,g.value=null)},openCombobox(){if(M.value=!0,!e.disabled&&l.value!==0){if(u.value.value){let r=u.calculateIndex(u.value.value);r!==-1&&(g.value=r)}l.value=0}},setActivationTrigger(r){S.value=r},goToOption(r,c,b){M.value=!1,D!==null&&cancelAnimationFrame(D),D=requestAnimationFrame(()=>{if(e.disabled||d.value&&!v.value.static&&l.value===1)return;if(u.virtual.value){g.value=r===P.Specific?c:ge({focus:r},{resolveItems:()=>u.virtual.value.options,resolveActiveIndex:()=>{var O,L;return(L=(O=u.activeOptionIndex.value)!=null?O:u.virtual.value.options.findIndex(H=>{var Y;return!((Y=u.virtual.value)!=null&&Y.disabled(H))}))!=null?L:null},resolveDisabled:O=>u.virtual.value.disabled(O),resolveId(){throw new Error("Function not implemented.")}}),S.value=b??2;return}let m=R();if(m.activeOptionIndex===null){let O=m.options.findIndex(L=>!L.dataRef.disabled);O!==-1&&(m.activeOptionIndex=O)}let w=r===P.Specific?c:ge({focus:r},{resolveItems:()=>m.options,resolveActiveIndex:()=>m.activeOptionIndex,resolveId:O=>O.id,resolveDisabled:O=>O.dataRef.disabled});g.value=w,S.value=b??2,f.value=m.options})},selectOption(r){let c=f.value.find(m=>m.id===r);if(!c)return;let{dataRef:b}=c;I(b.value)},selectActiveOption(){if(u.activeOptionIndex.value!==null){if(u.virtual.value)I(u.virtual.value.options[u.activeOptionIndex.value]);else{let{dataRef:r}=f.value[u.activeOptionIndex.value];I(r.value)}u.goToOption(P.Specific,u.activeOptionIndex.value)}},registerOption(r,c){let b=Pe({id:r,dataRef:c});if(u.virtual.value){f.value.push(b);return}p&&cancelAnimationFrame(p);let m=R(w=>(w.push(b),w));g.value===null&&u.isSelected(c.value.value)&&(m.activeOptionIndex=m.options.indexOf(b)),f.value=m.options,g.value=m.activeOptionIndex,S.value=2,m.options.some(w=>!C(w.dataRef.domRef))&&(p=requestAnimationFrame(()=>{let w=R();f.value=w.options,g.value=w.activeOptionIndex}))},unregisterOption(r,c){if(D!==null&&cancelAnimationFrame(D),c&&(M.value=!0),u.virtual.value){f.value=f.value.filter(m=>m.id!==r);return}let b=R(m=>{let w=m.findIndex(O=>O.id===r);return w!==-1&&m.splice(w,1),m});f.value=b.options,g.value=b.activeOptionIndex,S.value=2},isSelected(r){return k($.value,{0:()=>u.compare(N(u.value.value),N(r)),1:()=>N(u.value.value).some(c=>u.compare(N(c),N(r)))})},isActive(r){return g.value===u.calculateIndex(r)}};We([s,n,d],()=>u.closeCombobox(),x(()=>l.value===0)),ee(Ce,u),Ie(x(()=>k(l.value,{0:V.Open,1:V.Closed})));let E=x(()=>{var r;return(r=C(s))==null?void 0:r.closest("form")});return j(()=>{W([E],()=>{if(!E.value||e.defaultValue===void 0)return;function r(){u.change(e.defaultValue)}return E.value.addEventListener("reset",r),()=>{var c;(c=E.value)==null||c.removeEventListener("reset",r)}},{immediate:!0})}),()=>{var r,c,b;let{name:m,disabled:w,form:O,...L}=e,H={open:l.value===0,disabled:w,activeIndex:u.activeOptionIndex.value,activeOption:u.activeOptionIndex.value===null?null:u.virtual.value?u.virtual.value.options[(r=u.activeOptionIndex.value)!=null?r:0]:(b=(c=u.options.value[u.activeOptionIndex.value])==null?void 0:c.dataRef.value)!=null?b:null,value:y.value};return Q(De,[...m!=null&&y.value!=null?Ne({[m]:y.value}).map(([Y,he])=>Q(He,Ue({features:Ke.Hidden,key:Y,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,disabled:w,name:Y,value:he}))):[],Z({theirProps:{...t,...se(L,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:H,slots:i,attrs:t,name:"Combobox"})])}}}),Pt=J({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:i,attrs:t,slots:o,expose:l}){var a;let s=(a=e.id)!=null?a:`headlessui-combobox-input-${re()}`,n=ne("ComboboxInput"),d=x(()=>ye(C(n.inputRef))),v={value:!1};l({el:n.inputRef,$el:n.inputRef});function f(){n.change(null);let p=C(n.optionsRef);p&&(p.scrollTop=0),n.goToOption(P.Nothing)}let g=x(()=>{var p;let I=n.value.value;return C(n.inputRef)?typeof e.displayValue<"u"&&I!==void 0?(p=e.displayValue(I))!=null?p:"":typeof I=="string"?I:"":""});j(()=>{W([g,n.comboboxState,d],([p,I],[T,u])=>{if(v.value)return;let E=C(n.inputRef);E&&((u===0&&I===1||p!==T)&&(E.value=p),requestAnimationFrame(()=>{var r;if(v.value||!E||((r=d.value)==null?void 0:r.activeElement)!==E)return;let{selectionStart:c,selectionEnd:b}=E;Math.abs((b??0)-(c??0))===0&&c===0&&E.setSelectionRange(E.value.length,E.value.length)}))},{immediate:!0}),W([n.comboboxState],([p],[I])=>{if(p===0&&I===1){if(v.value)return;let T=C(n.inputRef);if(!T)return;let u=T.value,{selectionStart:E,selectionEnd:r,selectionDirection:c}=T;T.value="",T.value=u,c!==null?T.setSelectionRange(E,r,c):T.setSelectionRange(E,r)}})});let S=z(!1);function M(){S.value=!0}function R(){X().nextFrame(()=>{S.value=!1})}let $=ct();function F(p){switch(v.value=!0,$(()=>{v.value=!1}),p.key){case B.Enter:if(v.value=!1,n.comboboxState.value!==0||S.value)return;if(p.preventDefault(),p.stopPropagation(),n.activeOptionIndex.value===null){n.closeCombobox();return}n.selectActiveOption(),n.mode.value===0&&n.closeCombobox();break;case B.ArrowDown:return v.value=!1,p.preventDefault(),p.stopPropagation(),k(n.comboboxState.value,{0:()=>n.goToOption(P.Next),1:()=>n.openCombobox()});case B.ArrowUp:return v.value=!1,p.preventDefault(),p.stopPropagation(),k(n.comboboxState.value,{0:()=>n.goToOption(P.Previous),1:()=>{n.openCombobox(),Oe(()=>{n.value.value||n.goToOption(P.Last)})}});case B.Home:if(p.shiftKey)break;return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(P.First);case B.PageUp:return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(P.First);case B.End:if(p.shiftKey)break;return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(P.Last);case B.PageDown:return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(P.Last);case B.Escape:if(v.value=!1,n.comboboxState.value!==0)return;p.preventDefault(),n.optionsRef.value&&!n.optionsPropsRef.value.static&&p.stopPropagation(),n.nullable.value&&n.mode.value===0&&n.value.value===null&&f(),n.closeCombobox();break;case B.Tab:if(v.value=!1,n.comboboxState.value!==0)return;n.mode.value===0&&n.activationTrigger.value!==1&&n.selectActiveOption(),n.closeCombobox();break}}function A(p){i("change",p),n.nullable.value&&n.mode.value===0&&p.target.value===""&&f(),n.openCombobox()}function h(p){var I,T,u;let E=(I=p.relatedTarget)!=null?I:K.find(r=>r!==p.currentTarget);if(v.value=!1,!((T=C(n.optionsRef))!=null&&T.contains(E))&&!((u=C(n.buttonRef))!=null&&u.contains(E))&&n.comboboxState.value===0)return p.preventDefault(),n.mode.value===0&&(n.nullable.value&&n.value.value===null?f():n.activationTrigger.value!==1&&n.selectActiveOption()),n.closeCombobox()}function y(p){var I,T,u;let E=(I=p.relatedTarget)!=null?I:K.find(r=>r!==p.currentTarget);(T=C(n.buttonRef))!=null&&T.contains(E)||(u=C(n.optionsRef))!=null&&u.contains(E)||n.disabled.value||n.immediate.value&&n.comboboxState.value!==0&&(n.openCombobox(),X().nextFrame(()=>{n.setActivationTrigger(1)}))}let D=x(()=>{var p,I,T,u;return(u=(T=(I=e.defaultValue)!=null?I:n.defaultValue.value!==void 0?(p=e.displayValue)==null?void 0:p.call(e,n.defaultValue.value):null)!=null?T:n.defaultValue.value)!=null?u:""});return()=>{var p,I,T,u,E,r,c;let b={open:n.comboboxState.value===0},{displayValue:m,onChange:w,...O}=e,L={"aria-controls":(p=n.optionsRef.value)==null?void 0:p.id,"aria-expanded":n.comboboxState.value===0,"aria-activedescendant":n.activeOptionIndex.value===null?void 0:n.virtual.value?(I=n.options.value.find(H=>!n.virtual.value.disabled(H.dataRef.value)&&n.compare(H.dataRef.value,n.virtual.value.options[n.activeOptionIndex.value])))==null?void 0:I.id:(T=n.options.value[n.activeOptionIndex.value])==null?void 0:T.id,"aria-labelledby":(r=(u=C(n.labelRef))==null?void 0:u.id)!=null?r:(E=C(n.buttonRef))==null?void 0:E.id,"aria-autocomplete":"list",id:s,onCompositionstart:M,onCompositionend:R,onKeydown:F,onInput:A,onFocus:y,onBlur:h,role:"combobox",type:(c=t.type)!=null?c:"text",tabIndex:0,ref:n.inputRef,defaultValue:D.value,disabled:n.disabled.value===!0?!0:void 0};return Z({ourProps:L,theirProps:O,slot:b,attrs:t,slots:o,features:te.RenderStrategy|te.Static,name:"ComboboxInput"})}}}),Dt=J({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:i,slots:t,expose:o}){let l=ne("ComboboxOptions"),a=`headlessui-combobox-options-${re()}`;o({el:l.optionsRef,$el:l.optionsRef}),_(()=>{l.optionsPropsRef.value.static=e.static}),_(()=>{l.optionsPropsRef.value.hold=e.hold});let s=Ee(),n=x(()=>s!==null?(s.value&V.Open)===V.Open:l.comboboxState.value===0);vt({container:x(()=>C(l.optionsRef)),enabled:x(()=>l.comboboxState.value===0),accept(v){return v.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:v.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(v){v.setAttribute("role","none")}});function d(v){v.preventDefault()}return()=>{var v,f,g;let S={open:l.comboboxState.value===0},M={"aria-labelledby":(g=(v=C(l.labelRef))==null?void 0:v.id)!=null?g:(f=C(l.buttonRef))==null?void 0:f.id,id:a,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0,onMousedown:d},R=se(e,["hold"]);return Z({ourProps:M,theirProps:R,slot:S,attrs:i,slots:l.virtual.value&&l.comboboxState.value===0?{...t,default:()=>[Q(xt,{},t.default)]}:t,features:te.RenderStrategy|te.Static,visible:n.value,name:"ComboboxOptions"})}}}),Vt=J({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:i,attrs:t,expose:o}){let l=ne("ComboboxOption"),a=`headlessui-combobox-option-${re()}`,s=z(null),n=x(()=>e.disabled);o({el:s,$el:s});let d=x(()=>{var h;return l.virtual.value?l.activeOptionIndex.value===l.calculateIndex(e.value):l.activeOptionIndex.value===null?!1:((h=l.options.value[l.activeOptionIndex.value])==null?void 0:h.id)===a}),v=x(()=>l.isSelected(e.value)),f=le(Re,null),g=x(()=>({disabled:e.disabled,value:e.value,domRef:s,order:x(()=>e.order)}));j(()=>l.registerOption(a,g)),ae(()=>l.unregisterOption(a,d.value)),_(()=>{let h=C(s);h&&(f==null||f.value.measureElement(h))}),_(()=>{l.comboboxState.value===0&&d.value&&(l.virtual.value||l.activationTrigger.value!==0&&Oe(()=>{var h,y;return(y=(h=C(s))==null?void 0:h.scrollIntoView)==null?void 0:y.call(h,{block:"nearest"})}))});function S(h){h.preventDefault(),h.button===Te.Left&&(n.value||(l.selectOption(a),Je()||requestAnimationFrame(()=>{var y;return(y=C(l.inputRef))==null?void 0:y.focus({preventScroll:!0})}),l.mode.value===0&&l.closeCombobox()))}function M(){var h;if(e.disabled||(h=l.virtual.value)!=null&&h.disabled(e.value))return l.goToOption(P.Nothing);let y=l.calculateIndex(e.value);l.goToOption(P.Specific,y)}let R=je();function $(h){R.update(h)}function F(h){var y;if(!R.wasMoved(h)||e.disabled||(y=l.virtual.value)!=null&&y.disabled(e.value)||d.value)return;let D=l.calculateIndex(e.value);l.goToOption(P.Specific,D,0)}function A(h){var y;R.wasMoved(h)&&(e.disabled||(y=l.virtual.value)!=null&&y.disabled(e.value)||d.value&&(l.optionsPropsRef.value.hold||l.goToOption(P.Nothing)))}return()=>{let{disabled:h}=e,y={active:d.value,selected:v.value,disabled:h},D={id:a,ref:s,role:"option",tabIndex:h===!0?void 0:-1,"aria-disabled":h===!0?!0:void 0,"aria-selected":v.value,disabled:void 0,onMousedown:S,onFocus:M,onPointerenter:$,onMouseenter:$,onPointermove:F,onMousemove:F,onPointerleave:A,onMouseleave:A},p=se(e,["order","value"]);return Z({ourProps:D,theirProps:p,slot:y,attrs:t,slots:i,name:"ComboboxOption"})}}});function St(e){let i={called:!1};return(...t)=>{if(!i.called)return i.called=!0,e(...t)}}function ce(e,...i){e&&i.length>0&&e.classList.add(...i)}function oe(e,...i){e&&i.length>0&&e.classList.remove(...i)}var ve=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(ve||{});function Ot(e,i){let t=X();if(!e)return t.dispose;let{transitionDuration:o,transitionDelay:l}=getComputedStyle(e),[a,s]=[o,l].map(n=>{let[d=0]=n.split(",").filter(Boolean).map(v=>v.includes("ms")?parseFloat(v):parseFloat(v)*1e3).sort((v,f)=>f-v);return d});return a!==0?t.setTimeout(()=>i("finished"),a+s):i("finished"),t.add(()=>i("cancelled")),t.dispose}function Se(e,i,t,o,l,a){let s=X(),n=a!==void 0?St(a):()=>{};return oe(e,...l),ce(e,...i,...t),s.nextFrame(()=>{oe(e,...t),ce(e,...o),s.add(Ot(e,d=>(oe(e,...o,...i),ce(e,...l),n(d))))}),s.add(()=>oe(e,...i,...t,...o,...l)),s.add(()=>n("cancelled")),s.dispose}function U(e=""){return e.split(/\s+/).filter(i=>i.length>1)}let fe=Symbol("TransitionContext");var yt=(e=>(e.Visible="visible",e.Hidden="hidden",e))(yt||{});function It(){return le(fe,null)!==null}function Et(){let e=le(fe,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function wt(){let e=le(pe,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let pe=Symbol("NestingContext");function ue(e){return"children"in e?ue(e.children):e.value.filter(({state:i})=>i==="visible").length>0}function Me(e){let i=z([]),t=z(!1);j(()=>t.value=!0),ae(()=>t.value=!1);function o(a,s=q.Hidden){let n=i.value.findIndex(({id:d})=>d===a);n!==-1&&(k(s,{[q.Unmount](){i.value.splice(n,1)},[q.Hidden](){i.value[n].state="hidden"}}),!ue(i)&&t.value&&(e==null||e()))}function l(a){let s=i.value.find(({id:n})=>n===a);return s?s.state!=="visible"&&(s.state="visible"):i.value.push({id:a,state:"visible"}),()=>o(a,q.Unmount)}return{children:i,register:l,unregister:o}}let Fe=te.RenderStrategy,Tt=J({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:i,attrs:t,slots:o,expose:l}){let a=z(0);function s(){a.value|=V.Opening,i("beforeEnter")}function n(){a.value&=~V.Opening,i("afterEnter")}function d(){a.value|=V.Closing,i("beforeLeave")}function v(){a.value&=~V.Closing,i("afterLeave")}if(!It()&&Ye())return()=>Q(Rt,{...e,onBeforeEnter:s,onAfterEnter:n,onBeforeLeave:d,onAfterLeave:v},o);let f=z(null),g=x(()=>e.unmount?q.Unmount:q.Hidden);l({el:f,$el:f});let{show:S,appear:M}=Et(),{register:R,unregister:$}=wt(),F=z(S.value?"visible":"hidden"),A={value:!0},h=re(),y={value:!1},D=Me(()=>{!y.value&&F.value!=="hidden"&&(F.value="hidden",$(h),v())});j(()=>{let m=R(h);ae(m)}),_(()=>{if(g.value===q.Hidden&&h){if(S.value&&F.value!=="visible"){F.value="visible";return}k(F.value,{hidden:()=>$(h),visible:()=>R(h)})}});let p=U(e.enter),I=U(e.enterFrom),T=U(e.enterTo),u=U(e.entered),E=U(e.leave),r=U(e.leaveFrom),c=U(e.leaveTo);j(()=>{_(()=>{if(F.value==="visible"){let m=C(f);if(m instanceof Comment&&m.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function b(m){let w=A.value&&!M.value,O=C(f);!O||!(O instanceof HTMLElement)||w||(y.value=!0,S.value&&s(),S.value||d(),m(S.value?Se(O,p,I,T,u,L=>{y.value=!1,L===ve.Finished&&n()}):Se(O,E,r,c,u,L=>{y.value=!1,L===ve.Finished&&(ue(D)||(F.value="hidden",$(h),v()))})))}return j(()=>{W([S],(m,w,O)=>{b(O),A.value=!1},{immediate:!0})}),ee(pe,D),Ie(x(()=>k(F.value,{visible:V.Open,hidden:V.Closed})|a.value)),()=>{let{appear:m,show:w,enter:O,enterFrom:L,enterTo:H,entered:Y,leave:he,leaveFrom:Mt,leaveTo:Ft,...me}=e,ze={ref:f},Ae={...me,...M.value&&S.value&&Ge.isServer?{class:Be([t.class,me.class,...p,...I])}:{}};return Z({theirProps:Ae,ourProps:ze,slot:{},slots:o,attrs:t,features:Fe,visible:F.value==="visible",name:"TransitionChild"})}}}),Ct=Tt,Rt=J({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:i,attrs:t,slots:o}){let l=Ee(),a=x(()=>e.show===null&&l!==null?(l.value&V.Open)===V.Open:e.show);_(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let s=z(a.value?"visible":"hidden"),n=Me(()=>{s.value="hidden"}),d=z(!0),v={show:a,appear:x(()=>e.appear||!d.value)};return j(()=>{_(()=>{d.value=!1,a.value?s.value="visible":ue(n)||(s.value="hidden")})}),ee(pe,n),ee(fe,v),()=>{let f=se(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),g={unmount:e.unmount};return Z({ourProps:{...g,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[Q(Ct,{onBeforeEnter:()=>i("beforeEnter"),onAfterEnter:()=>i("afterEnter"),onBeforeLeave:()=>i("beforeLeave"),onAfterLeave:()=>i("afterLeave"),...t,...g,...f},o.default)]},attrs:{},features:Fe,visible:s.value==="visible",name:"Transition"})}}});export{Rt as S,Pt as i,Lt as l,Vt as r,Dt as u};
