import{Q as F,g,T as L,h as U,j as $,f as r,b as n,F as P,r as N,a as d,w as p,u as s,x as B,e as T,o,n as c,c as k,k as A,l as b,t as q,d as w,i as E}from"./app-BoZk32P-.js";import{_ as I,a as j,b as z}from"./TextInput-D7Qs5wWh.js";import{_ as D}from"./PrimaryButton--ycFbq9I.js";import{r as M}from"./CheckIcon-D58sfvjG.js";import{i as Q,u as R,r as Y,S as G,l as H}from"./transition-DqsJXyid.js";import"./keyboard-CQk8tYLo.js";const J={class:"grid grid-cols-10 gap-x-5"},K={key:0},O={key:0},W={class:"relative mt-1"},X={class:"relative w-full cursor-default overflow-hidden border-none box-border"},Z={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},ee={key:1},ae=["id","type","value"],te={key:1},se={key:0},oe={class:"text-sm text-gray-800 mb-5 -mt-2"},le={class:"flex items-center gap-4"},ne={key:0,class:"text-sm text-gray-600"},fe={__name:"UpdateProfileInformationForm",props:{emailVerifiedAt:{type:String},message:{type:String},postalList:{type:Array,required:!0}},setup(C){const h=C.postalList.map(a=>({id:a.postal_id,postalCode:a.postal_code,city:a.city,province:a.province})),m=F().props.auth.user,f=g(""),v=g(""),y=g(""),u=L({name:m.name,address_line:m.address_line,phone_number:m.phone_number,postal_id:m.postal_id});if(m.postal_id){const a=h.find(t=>t.id===m.postal_id);a&&(f.value=a,v.value=a.city,y.value=a.province)}const V=[{label:"Name",name:"name",type:"text",span:"col-span-5"},{label:"Email",name:"email",type:"email",span:"col-span-5"},{name:"verify_email",span:"col-span-10"},{label:"Address Line",name:"address_line",type:"text",span:"col-span-10"},{label:"Phone Number",name:"phone_number",type:"text",span:"col-span-5"},{label:"Postal Code",name:"postal_id",span:"col-span-5"},{label:"City",name:"city",type:"text",span:"col-span-5"},{label:"Province",name:"province",type:"text",span:"col-span-5"}];let i=g(""),S=U(()=>i.value===""?h:h.filter(a=>a.postalCode.replace(/\s+/g,"").includes(i.value.replace(/\s+/g,""))));return $(f,a=>{a?(v.value=a.city,y.value=a.province,u.postal_id=a.id):(v.value="",y.value="",u.postal_id="")}),(a,t)=>(o(),r("section",null,[t[7]||(t[7]=n("header",null,[n("h2",{class:"text-lg font-medium text-gray-900"}," Profile Information "),n("p",{class:"mt-1 text-sm text-gray-600"}," Update your account's profile information. ")],-1)),n("form",{onSubmit:t[3]||(t[3]=T(e=>s(u).patch(a.route("profile.update")),["prevent"])),class:"mt-6 space-y-6"},[n("div",J,[(o(),r(P,null,N(V,e=>n("div",{key:e.name,class:c(e.span)},[e.name!="verify_email"?(o(),r("div",K,[d(I,{for:e.name,value:e.label},null,8,["for","value"]),e.name!="city"&&e.name!="province"&&e.name!="email"?(o(),r("div",O,[e.name=="postal_id"?(o(),k(s(H),{key:0,modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=l=>f.value=l)},{default:p(()=>[n("div",W,[n("div",X,[d(s(Q),{class:"w-full focus:ring-0 border rounded-md border-gray-300 shadow-sm leading-normal focus:border-[#00adb5] focus:ring-[#00adb5] focus:border-2 focus:leading-none",displayValue:l=>l.postalCode,onChange:t[0]||(t[0]=l=>A(i)?i.value=l.target.value:i=l.target.value)},null,8,["displayValue"])]),d(s(G),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:t[1]||(t[1]=l=>A(i)?i.value="":i="")},{default:p(()=>[d(s(R),{class:"absolute mt-1 max-h-20 w-full overflow-hidden rounded-md bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-none scrollbar-hide"},{default:p(()=>[s(S).length===0&&s(i)!==""?(o(),r("div",Z," Nothing found. ")):b("",!0),(o(!0),r(P,null,N(s(S),l=>(o(),k(s(Y),{as:"template",key:l.id,value:l},{default:p(({selected:x,active:_})=>[n("li",{class:c(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":_,"text-gray-900":!_}])},[n("span",{class:c(["block truncate",{"font-medium":x,"font-normal":!x}])},q(l.postalCode),3),x?(o(),r("span",{key:0,class:c(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":_,"text-teal-600":!_}])},[d(s(M),{class:"h-5 w-5","aria-hidden":"true"})],2)):b("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"])):(o(),k(j,{key:1,id:e.name,type:e.type,class:c(["mt-1 block w-full",e.name!=V.slice(-1)[0].name?"mb-5":""]),modelValue:s(u)[e.name],"onUpdate:modelValue":l=>s(u)[e.name]=l,required:""},null,8,["id","type","class","modelValue","onUpdate:modelValue"]))])):(o(),r("div",ee,[n("input",{id:e.name,type:e.type,class:"mt-1 block w-full bg-gray-200 rounded-md shadow-sm border border-gray-300",value:e.name=="city"?v.value:e.name=="province"?y.value:s(m).email,disabled:""},null,8,ae)])),d(z,{class:"mt-2",message:s(u).errors[e.name]},null,8,["message"])])):(o(),r("div",te,[C.emailVerifiedAt===null?(o(),r("div",se,[n("p",oe,[t[5]||(t[5]=w(" Your email address is unverified. ")),d(s(E),{href:a.route("verification.send"),method:"post",as:"button",class:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:p(()=>t[4]||(t[4]=[w(" Click here to send the verification email. ")])),_:1},8,["href"])])])):b("",!0)]))],2)),64))]),n("div",le,[d(D,{disabled:s(u).processing},{default:p(()=>t[6]||(t[6]=[w("Save")])),_:1},8,["disabled"]),d(B,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:p(()=>[s(u).recentlySuccessful?(o(),r("p",ne," Saved. ")):b("",!0)]),_:1})])],32)]))}};export{fe as default};
