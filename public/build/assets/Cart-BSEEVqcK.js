import{T as j,h as p,g as m,c as L,w as r,o as i,b as t,f as d,F as Q,r as W,n as x,u,t as n,q as Y,v as G,e as I,a as c,l as T,d as v,s as D}from"./app-BoZk32P-.js";import{U as H}from"./UserAuthenticatedLayout-B1OtNgB2.js";import{_ as O}from"./PrimaryButton--ycFbq9I.js";import{_ as P,a as V}from"./SecondaryButton-C-s5NXMj.js";import{D as J}from"./DangerButton-C8RLlZHH.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as X}from"./XMarkIcon-zdu1rbxi.js";import"./Toast-BnPjMgb5.js";import"./ChevronDownIcon-BuPPLtHB.js";import"./keyboard-CQk8tYLo.js";const Z={class:"flex flex-col w-full items-start text-gray-700 px-10 box-border cart-page"},tt={class:"relative flex gap-5 h-full w-full"},et={key:0,class:"flex flex-col w-full justify-between gap-5"},st={key:1,class:"w-full flex"},lt={class:"flex flex-col w-2/3 justify-start m-auto gap-5 overflow-y-scroll scrollbar-hide cart-list"},ot=["src"],nt={class:"w-full flex flex-col gap-2 text-lg justify-between"},it={class:"flex flex-col gap-3"},at={class:"flex justify-between"},rt={class:"font-semibold mt-1"},dt={class:"w-1/2 h-fit flex items-center justify-between"},ut=["name","id","onUpdate:modelValue","onInput"],ct=["onClick"],ft={class:"text-gray-500 flex gap-2 items-center leading-none"},pt={class:"flex-shrink-0"},mt={class:"flex gap-2"},xt={class:"font-bold"},vt={key:0,class:"flex gap-2"},yt={class:"line-through text-gray-400 h-full"},gt={class:"text-red-500 font-bold"},_t={class:"flex w-full font-semibold gap-2"},wt={key:0,class:"text-green-400"},ht={key:1,class:"text-red-400"},bt={class:"relative w-1/3 flex-col m-auto flex flec-col gap-5 ml-5"},kt={class:"flex w-full justify-between"},Ct={class:"flex w-full justify-between"},jt={class:"flex w-full justify-between"},St={class:"flex w-full justify-between"},zt={key:0,class:"text-red-500 text-sm mt-2"},qt={class:"p-5 text-gray-900"},$t={class:"mt-6 flex justify-end"},Ft={class:"p-5 text-gray-900"},Et={class:"mt-6 flex justify-end"},It={methods:{asset(y){return`/${y}`}}},Tt=Object.assign(It,{__name:"Cart",props:{data:{type:Array,required:!0}},setup(y){const S=y,o=j({cart:S.data.map(l=>({id:l.id,product:l.product,size:l.size,quantity:l.quantity}))}),g=p(()=>o.cart.reduce((l,e)=>l+e.product.discounted_price*e.quantity,0)),z=m(5),q=p(()=>g.value*.12),$=p(()=>g.value+z.value+q.value),B=(l,e)=>{o.cart[l].quantity=e,o.cart=[...o.cart]},_=m(!1),F=m(null),a=j({productID:null}),M=l=>{_.value=!0,a.productID=l,D(()=>F.value)},w=()=>{_.value=!1,a.clearErrors(),a.reset()},N=()=>{a.delete(route("cart.destroy",a.productID),{preserveScroll:!0,onSuccess:()=>{o.cart=o.cart.filter(l=>l.id!==a.productID.id),w()},onError:()=>F.value,onFinish:()=>a.reset()})},h=m(!1),E=m(null),f=j({details:p(()=>o.cart),total_amount:p(()=>$.value.toFixed(2))}),U=()=>{h.value=!0,D(()=>E.value)},b=()=>{h.value=!1,f.clearErrors(),f.reset()},A=()=>{f.post(route("order.store"),{preserveScroll:!0,onSuccess:()=>b(),onError:()=>E.value,onFinish:()=>a.reset()})},k=()=>{for(let l=0;l<o.cart.length;l++){const e=o.cart[l].quantity,s=o.cart[l].product.sizes[o.cart[l].size];if(e>s)return!0}return!1};return(l,e)=>(i(),L(H,{title:"Cart"},{default:r(()=>[t("div",Z,[t("div",tt,[S.data.length==0?(i(),d("div",et,e[0]||(e[0]=[t("div",{class:"flex flex-col justify-between gap-5 mx-10"},[t("p",{class:"text-5xl font-semibold my-10"}," Shopping Cart "),t("p",{class:"text-center text-xl h-full font-normal my-10"}," Your cart is empty ")],-1)]))):(i(),d("div",st,[t("div",lt,[e[5]||(e[5]=t("div",{class:"sticky top-0 flex flex-col bg-white"},[t("p",{class:"text-5xl font-semibold py-10"}," Shopping Cart "),t("hr")],-1)),(i(!0),d(Q,null,W(u(o).cart,(s,R)=>(i(),d("div",{class:"w-full",key:s.id},[t("div",{class:x(["flex gap-5",s!=u(o).cart[0]?"mb-5":"",u(o).cart.length===1?"mb-5":""])},[t("img",{class:"w-1/3 rounded-xl",src:l.asset(s.product.imageurl.slice(36)),alt:""},null,8,ot),t("div",nt,[t("div",it,[t("div",at,[t("p",rt,n(s.product.name),1),t("div",dt,[e[1]||(e[1]=t("p",{class:"leading-none"}," Quantity: ",-1)),Y(t("input",{class:"w-1/3 rounded-md h-7",step:"1",min:"0",type:"number",name:s.id,id:s.id,"onUpdate:modelValue":C=>s.quantity=C,onInput:C=>B(R,s.quantity)},null,40,ut),[[G,s.quantity]]),t("button",{class:"p-2",onClick:I(C=>M(s),["prevent"])},[c(u(X),{class:"size-5"})],8,ct)])]),t("div",ft,[t("p",pt,n(s.product.category.name),1),e[2]||(e[2]=t("p",null,"|",-1)),t("p",null,n(s.size),1)]),t("div",mt,[t("p",xt," $ "+n(s.product.discounted_price),1),s.product.discount!=0?(i(),d("div",vt,[t("p",yt," $ "+n(s.product.price),1),t("p",gt,n(s.product.discount)+" % off ",1)])):T("",!0)])]),t("div",_t,[s.product.sizes.hasOwnProperty(s.size)&&s.product.sizes[s.size]>=s.quantity?(i(),d("p",wt," In Stock ")):(i(),d("p",ht," Out of Stock ")),e[3]||(e[3]=t("p",null,"|",-1)),t("p",null,n(s.product.sizes[s.size])+" items left! ",1)])])],2),e[4]||(e[4]=t("hr",{class:"mt-5"},null,-1))]))),128))]),e[15]||(e[15]=t("div",{class:"border-l border-gray-300 ml-5"},null,-1)),t("div",bt,[e[11]||(e[11]=t("p",{class:"text-xl font-semibold"}," Order Summary ",-1)),t("div",kt,[e[6]||(e[6]=t("p",null," Subtotal ",-1)),t("p",null," $ "+n(g.value.toFixed(2)),1)]),e[12]||(e[12]=t("hr",null,null,-1)),t("div",Ct,[e[7]||(e[7]=t("p",null," Shipping Estimate ",-1)),t("p",null," $ "+n(z.value.toFixed(2)),1)]),e[13]||(e[13]=t("hr",null,null,-1)),t("div",jt,[e[8]||(e[8]=t("p",null," Tax Estimate ",-1)),t("p",null," $ "+n(q.value.toFixed(2)),1)]),e[14]||(e[14]=t("hr",null,null,-1)),t("div",St,[e[9]||(e[9]=t("p",{class:"text-xl font-semibold"}," Order Summary ",-1)),t("p",null," $ "+n($.value.toFixed(2)),1)]),c(O,{class:x(["w-full justify-center",{"opacity-50 cursor-not-allowed":k()}]),onClick:I(U,["prevent"]),disabled:k()},{default:r(()=>e[10]||(e[10]=[t("p",{class:"py-1 px-2"}," Checkout ",-1)])),_:1},8,["class","disabled"]),k()?(i(),d("p",zt," One or more items exceed available stock. Please adjust your cart. ")):T("",!0)])]))]),c(V,{"max-width":"sm",show:_.value,onClose:w},{default:r(()=>[t("div",qt,[e[18]||(e[18]=t("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure want to remove the product from your cart? ",-1)),t("div",$t,[c(P,{onClick:w},{default:r(()=>e[16]||(e[16]=[v(" Cancel ")])),_:1}),c(J,{class:x(["ms-3",{"opacity-25":u(o).processing}]),disabled:u(o).processing,onClick:N},{default:r(()=>e[17]||(e[17]=[v(" remove ")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"]),c(V,{"max-width":"sm",show:h.value,onClose:b},{default:r(()=>[t("div",Ft,[e[21]||(e[21]=t("h2",{class:"text-lg font-medium text-gray-900"}," Imagine this is the payment process. ",-1)),e[22]||(e[22]=t("p",null," This can be payment option. ",-1)),e[23]||(e[23]=t("p",null," The adress of the customer where the product will be delivered. ",-1)),e[24]||(e[24]=t("p",null," When proceeding, the payment is regarded as successfull. Thus, it'll skip the pending status. ",-1)),t("div",Et,[c(P,{onClick:b},{default:r(()=>e[19]||(e[19]=[v(" Cancel ")])),_:1}),c(O,{class:x(["ms-3",{"opacity-25":u(f).processing}]),disabled:u(f).processing,onClick:A},{default:r(()=>e[20]||(e[20]=[v(" proceed ")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"])])]),_:1}))}}),Lt=K(Tt,[["__scopeId","data-v-f37d6ca7"]]);export{Lt as default};
